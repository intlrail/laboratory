(function() {
  var App;

  window.App = (function() {
    class App {
      constructor() {
        var fb, lin, plus, twt;
        this.init = this.init.bind(this);
        this.update = this.update.bind(this);
        this.renderScene = this.renderScene.bind(this);
        this.resize = this.resize.bind(this);
        fb = document.getElementById('facebook');
        twt = document.getElementById('twitter');
        lin = document.getElementById('linkedin');
        plus = document.getElementById('plus');
        fb.addEventListener('click', () => {
          return window.open("https://www.facebook.com/Pierre.de.miel", '_blank');
        }, false);
        twt.addEventListener('click', () => {
          return window.open("https://twitter.com/Samsyyyy", '_blank');
        }, false);
        lin.addEventListener('click', () => {
          return window.open("https://www.linkedin.com/profile/view?id=182449324&trk=nav_responsive_tab_profile", '_blank');
        }, false);
        plus.addEventListener('click', () => {
          return window.open("http://experiments.crma.ninja/repos/samuel-honigstein/", '_blank');
        }, false);
      }

      init() {
        this.scene = new THREE.Scene();
        this.camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100000);
        console.log(this.camera);
        this.camera.position.z = 5;
        this.camera.position.y = 1;
        this.renderer = new THREE.WebGLRenderer({
          width: window.innerWidth,
          height: window.innerHeight,
          alpha: true,
          scale: 1,
          antialias: true
        });
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.container = document.createElement('div');
        this.container.id = 'canvasGL';
        this.container.appendChild(this.renderer.domElement);
        this.camera.lookAt(new THREE.Vector3());
        document.getElementById('experience').appendChild(this.container);
        this.terrain = new Terrain(this.scene);
        this.scene.add(this.terrain.plane_mesh);
        return this.update();
      }

      update() {
        requestAnimationFrame(this.update);
        this.terrain.update();
        return this.renderScene();
      }

      renderScene() {
        return this.renderer.render(this.scene, this.camera);
      }

      resize(stageWidth, stageHeight) {
        this.camera.aspect = stageWidth / stageHeight;
        this.camera.updateProjectionMatrix();
        return this.renderer.setSize(stageWidth, stageHeight);
      }

    };

    App.prototype.canvasGL = null;

    App.prototype.container = null;

    App.prototype.scene = null;

    App.prototype.camera = null;

    App.prototype.renderer = null;

    App.prototype.geometry = null;

    App.prototype.material = null;

    App.prototype.mesh = null;

    App.prototype.gui = null;

    App.prototype.terrain = null;

    App.prototype.composer = null;

    App.prototype.render_pass = null;

    App.prototype.fxaa_pass = null;

    App.prototype.posteffect = false;

    App.prototype.meteo = null;

    App.prototype.skybox = null;

    return App;

  }).call(this);

  window.Terrain = (function() {
    class Terrain {
      constructor(scene) {
        this.init = this.init.bind(this);
        this.initGUI = this.initGUI.bind(this);
        this.buildPlanes = this.buildPlanes.bind(this);
        this.update = this.update.bind(this);
        this.scene = scene;
        this.init();
      }

      init() {
        this.uniforms = {
          time: {
            type: "f",
            value: 0.0
          },
          speed: {
            type: "f",
            value: this.options.speed
          },
          elevation: {
            type: "f",
            value: this.options.elevation
          },
          noise_range: {
            type: "f",
            value: this.options.noise_range
          },
          offset: {
            type: "f",
            value: this.options.elevation
          },
          perlin_passes: {
            type: "f",
            value: this.options.perlin_passes
          },
          sombrero_amplitude: {
            type: "f",
            value: this.options.sombrero_amplitude
          },
          sombrero_frequency: {
            type: "f",
            value: this.options.sombrero_frequency
          },
          line_color: {
            type: "c",
            value: new THREE.Color(this.options.wireframe_color)
          }
        };
        this.buildPlanes(this.options.segments);
        return this.initGUI();
      }

      initGUI() {
        this.gui = new dat.GUI();
        this.gui.values = {};
        this.gui.values.speed = this.gui.add(this.options, 'speed', -5, 5).step(0.01);
        this.gui.values.segments = this.gui.add(this.options, 'segments', 20, 800).step(1);
        this.gui.values.perlin_passes = this.gui.add(this.options, 'perlin_passes', 1, 3).step(1);
        this.gui.values.elevation = this.gui.add(this.options, 'elevation', -10, 10).step(0.01);
        this.gui.values.noise_range = this.gui.add(this.options, 'noise_range', -10, 10).step(0.01);
        this.gui.values.sombrero_amplitude = this.gui.add(this.options, 'sombrero_amplitude', -5, 5).step(0.1);
        this.gui.values.sombrero_frequency = this.gui.add(this.options, 'sombrero_frequency', 0, 100).step(0.1);
        this.gui.values.wireframe_color = this.gui.addColor(this.options, 'wireframe_color');
        this.gui.values.wireframe = this.gui.add(this.options, 'wireframe');
        this.gui.values.floor_visible = this.gui.add(this.options, 'floor_visible');
        this.gui.values.elevation.onChange((value) => {
          this.uniforms.elevation.value = value;
        });
        this.gui.values.wireframe.onChange((value) => {
          this.plane_material.wireframe = value;
        });
        this.gui.values.floor_visible.onChange((value) => {
          this.groundMaterial.visible = value;
        });
        this.gui.values.noise_range.onChange((value) => {
          this.uniforms.noise_range.value = value;
        });
        this.gui.values.speed.onChange((value) => {
          this.uniforms.speed.value = value;
        });
        this.gui.values.perlin_passes.onChange((value) => {
          this.uniforms.perlin_passes.value = value;
        });
        this.gui.values.sombrero_amplitude.onChange((value) => {
          this.uniforms.sombrero_amplitude.value = value;
        });
        this.gui.values.sombrero_frequency.onChange((value) => {
          this.uniforms.sombrero_frequency.value = value;
        });
        this.gui.values.wireframe_color.onChange((value) => {
          console.log('value');
          this.uniforms.line_color.value = new THREE.Color(value);
        });
        return this.gui.values.segments.onFinishChange((value) => {
          this.scene.remove(this.plane_mesh);
          this.buildPlanes(value);
          this.scene.add(this.plane_mesh);
        });
      }

      buildPlanes(segments) {
        this.plane_geometry = new THREE.PlaneBufferGeometry(20, 20, segments, segments);
        this.plane_material = new THREE.ShaderMaterial({
          vertexShader: document.getElementById('shader-vertex-terrain-perlinsombrero').textContent,
          fragmentShader: document.getElementById('shader-fragment-terrain').textContent,
          wireframe: this.options.wireframe,
          wireframeLinewidth: 0.8,
          alpha: true,
          transparent: true,
          uniforms: this.uniforms
        });
        this.groundMaterial = new THREE.MeshPhongMaterial({
          ambient: 0xffffff,
          color: 0xffffff,
          specular: 0xffffff
        });
        this.groundMaterial.color.setHSL(0, 0.0, 100.0);
        this.materials = [this.groundMaterial, this.plane_material];
        this.plane_mesh = THREE.SceneUtils.createMultiMaterialObject(this.plane_geometry, this.materials);
        this.plane_mesh.rotation.x = -Math.PI / 2;
        return this.plane_mesh.position.y = -0.5;
      }

      update() {
        return this.plane_material.uniforms['time'].value = this.clock.getElapsedTime();
      }

    };

    Terrain.prototype.uniforms = null;

    Terrain.prototype.plane_mesh = null;

    Terrain.prototype.plane_geometry = null;

    Terrain.prototype.groundMaterial = null;

    Terrain.prototype.clock = new THREE.Clock(true);

    Terrain.prototype.options = {
      elevation: 1,
      noise_range: 2.14,
      sombrero_amplitude: 0.6,
      sombrero_frequency: 10.0,
      speed: 0,
      segments: 324,
      wireframe_color: '#ffffff',
      perlin_passes: 1,
      wireframe: true,
      floor_visible: false
    };

    Terrain.prototype.scene = null;

    return Terrain;

  }).call(this);

  App = new window.App();

  App.init();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQSxNQUFBOztFQUFNLE1BQU0sQ0FBQztJQUFiLE1BQUEsSUFBQTtNQW1DSSxXQUFhLENBQUEsQ0FBQTtBQUVqQixZQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO1lBK0JJLENBQUEsV0FBQSxDQUFBO1lBaUNBLENBQUEsYUFBQSxDQUFBO1lBVUEsQ0FBQSxrQkFBQSxDQUFBO1lBS0EsQ0FBQSxhQUFBLENBQUE7UUEvRUksRUFBQSxHQUFLLFFBQVEsQ0FBQyxjQUFULENBQXdCLFVBQXhCO1FBQ0wsR0FBQSxHQUFNLFFBQVEsQ0FBQyxjQUFULENBQXdCLFNBQXhCO1FBQ04sR0FBQSxHQUFNLFFBQVEsQ0FBQyxjQUFULENBQXdCLFVBQXhCO1FBQ04sSUFBQSxHQUFPLFFBQVEsQ0FBQyxjQUFULENBQXdCLE1BQXhCO1FBRVAsRUFBRSxDQUFDLGdCQUFILENBQW9CLE9BQXBCLEVBQTZCLENBQUEsQ0FBQSxHQUFBO2lCQUV6QixNQUFNLENBQUMsSUFBUCxDQUFZLHlDQUFaLEVBQXVELFFBQXZEO1FBRnlCLENBQTdCLEVBSUUsS0FKRjtRQU1BLEdBQUcsQ0FBQyxnQkFBSixDQUFxQixPQUFyQixFQUE4QixDQUFBLENBQUEsR0FBQTtpQkFFMUIsTUFBTSxDQUFDLElBQVAsQ0FBWSw4QkFBWixFQUE0QyxRQUE1QztRQUYwQixDQUE5QixFQUlFLEtBSkY7UUFNQSxHQUFHLENBQUMsZ0JBQUosQ0FBcUIsT0FBckIsRUFBOEIsQ0FBQSxDQUFBLEdBQUE7aUJBRTFCLE1BQU0sQ0FBQyxJQUFQLENBQVksbUZBQVosRUFBaUcsUUFBakc7UUFGMEIsQ0FBOUIsRUFJRSxLQUpGO1FBT0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLENBQUEsQ0FBQSxHQUFBO2lCQUUzQixNQUFNLENBQUMsSUFBUCxDQUFZLHdEQUFaLEVB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RixhQUFBLEVBQW1CLENBaEJqQjtNQWtCRixTQUFBLEVBQW1CLElBbEJqQjtNQW9CRixhQUFBLEVBQW1CO0lBcEJqQjs7c0JBd0JWLEtBQUEsR0FBUTs7Ozs7O0VBbU5aLEdBQUEsR0FBTSxJQUFJLE1BQU0sQ0FBQyxHQUFYLENBQUE7O0VBQ04sR0FBRyxDQUFDLElBQUosQ0FBQTtBQXpYQSIsInNvdXJjZXNDb250ZW50IjpbIlxuY2xhc3Mgd2luZG93LkFwcCBcblxuICAgIGNhbnZhc0dMICAgIDogbnVsbFxuXG4gICAgY29udGFpbmVyICAgOiBudWxsXG5cbiAgICBzY2VuZSAgICAgICA6IG51bGxcblxuICAgIGNhbWVyYSAgICAgIDogbnVsbFxuXG4gICAgcmVuZGVyZXIgICAgOiBudWxsXG5cbiAgICBnZW9tZXRyeSAgICA6IG51bGxcblxuICAgIG1hdGVyaWFsICAgIDogbnVsbFxuXG4gICAgbWVzaCAgICAgICAgOiBudWxsXG5cbiAgICBndWkgICAgICAgICA6IG51bGxcblxuICAgIHRlcnJhaW4gICAgIDogbnVsbFxuXG4gICAgY29tcG9zZXIgICAgOiBudWxsXG5cbiAgICByZW5kZXJfcGFzcyA6IG51bGxcblxuICAgIGZ4YWFfcGFzcyAgIDogbnVsbFxuXG4gICAgcG9zdGVmZmVjdCAgOiBmYWxzZVxuXG4gICAgbWV0ZW8gICAgICAgOiBudWxsXG5cbiAgICBza3lib3ggICAgICA6IG51bGxcblxuXG4gICAgY29uc3RydWN0b3I6IC0+XG5cbiAgICAgICAgZmIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmFjZWJvb2snKTtcbiAgICAgICAgdHd0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R3aXR0ZXInKTtcbiAgICAgICAgbGluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtlZGluJyk7XG4gICAgICAgIHBsdXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGx1cycpO1xuXG4gICAgICAgIGZiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PlxuXG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9QaWVycmUuZGUubWllbFwiLCAnX2JsYW5rJyk7XG5cbiAgICAgICAgLCBmYWxzZSlcblxuICAgICAgICB0d3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+XG5cbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly90d2l0dGVyLmNvbS9TYW1zeXl5eVwiLCAnX2JsYW5rJyk7XG5cbiAgICAgICAgLCBmYWxzZSlcblxuICAgICAgICBsaW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+XG5cbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3Byb2ZpbGUvdmlldz9pZD0xODI0NDkzMjQmdHJrPW5hdl9yZXNwb25zaXZlX3RhYl9wcm9maWxlXCIsICdfYmxhbmsnKTtcblxuICAgICAgICAsIGZhbHNlKVxuXG5cbiAgICAgICAgcGx1cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT5cblxuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwOi8vZXhwZXJpbWVudHMuY3JtYS5uaW5qYS9yZXBvcy9zYW11ZWwtaG9uaWdzdGVpbi9cIiwgJ19ibGFuaycpO1xuXG4gICAgICAgICwgZmFsc2UpXG5cblxuICAgIGluaXQ6ID0+XG5cblxuICAgICAgICBAc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuICAgICAgICBAY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCA2MCwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMDAwICk7XG5cbiAgICAgICAgY29uc29sZS5sb2cgQGNhbWVyYVxuXG4gICAgICAgIEBjYW1lcmEucG9zaXRpb24ueiA9ICA3O1xuXG4gICAgICAgIEBjYW1lcmEucG9zaXRpb24ueSA9ICAxO1xuXG4gICAgICAgIEByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCB7IHdpZHRoOiAgd2luZG93LmlubmVyV2lkdGgsIGhlaWdodDogIHdpbmRvdy5pbm5lckhlaWdodCwgc2NhbGU6MSwgYW50aWFsaWFzOiBmYWxzZSB9KTtcblxuICAgICAgICBAcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcblxuICAgICAgICBAY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcblxuICAgICAgICBAY29udGFpbmVyLmlkID0gJ2NhbnZhc0dMJztcblxuICAgICAgICBAY29udGFpbmVyLmFwcGVuZENoaWxkKCBAcmVuZGVyZXIuZG9tRWxlbWVudCApO1xuXG4gICAgICAgIEBjYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlcmllbmNlJykuYXBwZW5kQ2hpbGQoIEBjb250YWluZXIgKTtcblxuICAgICAgICBAdGVycmFpbiA9IG5ldyBUZXJyYWluKEBzY2VuZSlcblxuICAgICAgICBAc2NlbmUuYWRkKEB0ZXJyYWluLnBsYW5lX21lc2gpXG5cbiAgICAgICAgQHVwZGF0ZSgpXG5cbiAgICB1cGRhdGU6ID0+XG5cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKEB1cGRhdGUpXG5cbiAgICAgICAgQHRlcnJhaW4udXBkYXRlKClcblxuICAgICAgICBAcmVuZGVyU2NlbmUoKVxuXG5cblxuICAgIHJlbmRlclNjZW5lIDo9PlxuXG4gICAgICAgIEByZW5kZXJlci5yZW5kZXIoIEBzY2VuZSwgQGNhbWVyYSApO1xuXG5cbiAgICByZXNpemU6KHN0YWdlV2lkdGgsIHN0YWdlSGVpZ2h0KSA9PlxuXG4gICAgICAgIFxuXG4gICAgICAgIEBjYW1lcmEuYXNwZWN0ID0gc3RhZ2VXaWR0aCAvIHN0YWdlSGVpZ2h0O1xuXG4gICAgICAgIEBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuXG4gICAgICAgIEByZW5kZXJlci5zZXRTaXplKCBzdGFnZVdpZHRoLCBzdGFnZUhlaWdodCApO1xuXG5cblxuXG5jbGFzcyB3aW5kb3cuVGVycmFpblxuXG4gICAgdW5pZm9ybXMgICAgICAgICAgICAgICAgOiBudWxsXG5cbiAgICBwbGFuZV9tZXNoICAgICAgICAgICAgICA6IG51bGxcblxuICAgIHBsYW5lX2dlb21ldHJ5ICAgICAgICAgIDogbnVsbFxuXG4gICAgZ3JvdW5kTWF0ZXJpYWwgICAgICAgICAgOiBudWxsXG5cbiAgICBjbG9jayAgICAgICAgICAgICAgICAgICA6ICBuZXcgVEhSRUUuQ2xvY2sodHJ1ZSlcblxuICAgIG9wdGlvbnMgOiB7XG5cbiAgICAgICAgICAgIGVsZXZhdGlvbiA6IDEsXG5cbiAgICAgICAgICAgIG5vaXNlX3JhbmdlICA6IDIuMTQsXG5cbiAgICAgICAgICAgIHNvbWJyZXJvX2FtcGxpdHVkZSA6IDAuNixcblxuICAgICAgICAgICAgc29tYnJlcm9fZnJlcXVlbmN5IDogMTAuMCxcblxuICAgICAgICAgICAgc3BlZWQgICAgICAgICAgICA6IDAuOCxcblxuICAgICAgICAgICAgc2VnbWVudHMgICAgICAgICA6IDMyNCxcblxuICAgICAgICAgICAgd2lyZWZyYW1lX2NvbG9yICAgICA6ICcjZTI1Y2ZlJyxcblxuICAgICAgICAgICAgcGVybGluX3Bhc3NlcyAgICA6IDEsXG5cbiAgICAgICAgICAgIHdpcmVmcmFtZSAgICAgICAgOiB0cnVlLFxuXG4gICAgICAgICAgICBmbG9vcl92aXNpYmxlICAgIDogdHJ1ZVxuXG4gICAgICAgIH1cblxuICAgIHNjZW5lIDogbnVsbFxuXG4gICAgY29uc3RydWN0b3I6KHNjZW5lKS0+XG5cbiAgICAgICAgQHNjZW5lID0gc2NlbmVcblxuICAgICAgICBAaW5pdCgpXG5cbiAgICBpbml0IDo9PlxuXG5cblxuICAgICAgICBAdW5pZm9ybXMgPVxuICAgICAgICAgIHRpbWU6XG4gICAgICAgICAgICB0eXBlOiBcImZcIlxuICAgICAgICAgICAgdmFsdWU6IDAuMFxuXG4gICAgICAgICAgc3BlZWQ6XG4gICAgICAgICAgICB0eXBlOiBcImZcIlxuICAgICAgICAgICAgdmFsdWU6IEBvcHRpb25zLnNwZWVkXG5cbiAgICAgICAgICBlbGV2YXRpb246XG4gICAgICAgICAgICB0eXBlOiBcImZcIlxuICAgICAgICAgICAgdmFsdWU6IEBvcHRpb25zLmVsZXZhdGlvblxuXG4gICAgICAgICAgbm9pc2VfcmFuZ2U6XG4gICAgICAgICAgICB0eXBlOiBcImZcIlxuICAgICAgICAgICAgdmFsdWU6IEBvcHRpb25zLm5vaXNlX3JhbmdlXG5cbiAgICAgICAgICBvZmZzZXQ6XG4gICAgICAgICAgICB0eXBlOiBcImZcIlxuICAgICAgICAgICAgdmFsdWU6IEBvcHRpb25zLmVsZXZhdGlvblxuXG4gICAgICAgICAgcGVybGluX3Bhc3NlczpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogQG9wdGlvbnMucGVybGluX3Bhc3Nlc1xuXG4gICAgICAgICAgc29tYnJlcm9fYW1wbGl0dWRlOlxuICAgICAgICAgICAgdHlwZTogXCJmXCJcbiAgICAgICAgICAgIHZhbHVlOiBAb3B0aW9ucy5zb21icmVyb19hbXBsaXR1ZGVcblxuICAgICAgICAgIHNvbWJyZXJvX2ZyZXF1ZW5jeTpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogQG9wdGlvbnMuc29tYnJlcm9fZnJlcXVlbmN5XG5cbiAgICAgICAgICBsaW5lX2NvbG9yOlxuICAgICAgICAgICAgdHlwZTogXCJjXCJcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoQG9wdGlvbnMud2lyZWZyYW1lX2NvbG9yKVxuXG5cblxuXG5cblxuICAgICAgICBAYnVpbGRQbGFuZXMoQG9wdGlvbnMuc2VnbWVudHMpXG5cbiAgICAgICBcblxuICAgICAgICBAaW5pdEdVSSgpXG5cblxuICAgIGluaXRHVUk6KCkgPT5cblxuICAgICAgICBAZ3VpID0gbmV3IGRhdC5HVUkoKTtcblxuICAgICAgICBAZ3VpLnZhbHVlcyA9IHt9XG5cbiAgICAgICAgQGd1aS52YWx1ZXMuc3BlZWQgICAgICAgICAgICA9IEBndWkuYWRkKEBvcHRpb25zLCdzcGVlZCcsLTUsNSkuc3RlcCgwLjAxKTtcblxuICAgICAgICBAZ3VpLnZhbHVlcy5zZWdtZW50cyAgICAgICAgID0gQGd1aS5hZGQoQG9wdGlvbnMsJ3NlZ21lbnRzJywyMCw4MDApLnN0ZXAoMSk7XG5cbiAgICAgICAgQGd1aS52YWx1ZXMucGVybGluX3Bhc3NlcyAgICAgPSBAZ3VpLmFkZChAb3B0aW9ucywncGVybGluX3Bhc3NlcycsMSwzKS5zdGVwKDEpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLmVsZXZhdGlvbiA9IEBndWkuYWRkKEBvcHRpb25zLCdlbGV2YXRpb24nLC0xMCwxMCkuc3RlcCgwLjAxKTtcblxuICAgICAgICBAZ3VpLnZhbHVlcy5ub2lzZV9yYW5nZSAgPSBAZ3VpLmFkZChAb3B0aW9ucywnbm9pc2VfcmFuZ2UnLC0xMCwxMCkuc3RlcCgwLjAxKTtcblxuICAgICAgICBAZ3VpLnZhbHVlcy5zb21icmVyb19hbXBsaXR1ZGUgICAgID0gQGd1aS5hZGQoQG9wdGlvbnMsJ3NvbWJyZXJvX2FtcGxpdHVkZScsLTUsNSkuc3RlcCgwLjEpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLnNvbWJyZXJvX2ZyZXF1ZW5jeSAgICAgPSBAZ3VpLmFkZChAb3B0aW9ucywnc29tYnJlcm9fZnJlcXVlbmN5JywwLDEwMCkuc3RlcCgwLjEpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLndpcmVmcmFtZV9jb2xvciAgICAgPSBAZ3VpLmFkZENvbG9yKEBvcHRpb25zLCd3aXJlZnJhbWVfY29sb3InKTtcblxuICBcblxuICAgICAgICBAZ3VpLnZhbHVlcy53aXJlZnJhbWUgPSBAZ3VpLmFkZChAb3B0aW9ucywgJ3dpcmVmcmFtZScpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLmZsb29yX3Zpc2libGUgPSBAZ3VpLmFkZChAb3B0aW9ucywgJ2Zsb29yX3Zpc2libGUnKTtcblxuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMuZWxldmF0aW9uLm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHVuaWZvcm1zLmVsZXZhdGlvbi52YWx1ZSA9IHZhbHVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMud2lyZWZyYW1lLm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHBsYW5lX21hdGVyaWFsLndpcmVmcmFtZSA9IHZhbHVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIEBndWkudmFsdWVzLmZsb29yX3Zpc2libGUub25DaGFuZ2UgKHZhbHVlKSA9PlxuXG4gICAgICAgICAgICBAZ3JvdW5kTWF0ZXJpYWwudmlzaWJsZSA9IHZhbHVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG5cblxuICAgICAgICBAZ3VpLnZhbHVlcy5ub2lzZV9yYW5nZS5vbkNoYW5nZSAodmFsdWUpID0+XG5cbiAgICAgICAgICAgIEB1bmlmb3Jtcy5ub2lzZV9yYW5nZS52YWx1ZSA9IHZhbHVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIEBndWkudmFsdWVzLnNwZWVkLm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHVuaWZvcm1zLnNwZWVkLnZhbHVlID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMucGVybGluX3Bhc3Nlcy5vbkNoYW5nZSAodmFsdWUpID0+XG5cbiAgICAgICAgICAgIEB1bmlmb3Jtcy5wZXJsaW5fcGFzc2VzLnZhbHVlID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMuc29tYnJlcm9fYW1wbGl0dWRlLm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHVuaWZvcm1zLnNvbWJyZXJvX2FtcGxpdHVkZS52YWx1ZSA9IHZhbHVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIEBndWkudmFsdWVzLnNvbWJyZXJvX2ZyZXF1ZW5jeS5vbkNoYW5nZSAodmFsdWUpID0+XG5cbiAgICAgICAgICAgIEB1bmlmb3Jtcy5zb21icmVyb19mcmVxdWVuY3kudmFsdWUgPSB2YWx1ZVxuXG4gICAgICAgICAgICByZXR1cm5cblxuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMud2lyZWZyYW1lX2NvbG9yLm9uQ2hhbmdlICh2YWx1ZSkgPT5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWx1ZScpXG4gICAgICAgICAgICBAdW5pZm9ybXMubGluZV9jb2xvci52YWx1ZSA9IG5ldyBUSFJFRS5Db2xvcih2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBAZ3VpLnZhbHVlcy5zZWdtZW50cy5vbkZpbmlzaENoYW5nZSAodmFsdWUpID0+XG5cbiAgICAgICAgICAgIEBzY2VuZS5yZW1vdmUoQHBsYW5lX21lc2gpXG5cbiAgICAgICAgICAgIEBidWlsZFBsYW5lcyh2YWx1ZSlcblxuICAgICAgICAgICAgQHNjZW5lLmFkZChAcGxhbmVfbWVzaClcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgYnVpbGRQbGFuZXM6KHNlZ21lbnRzKT0+XG5cblxuXG4gICAgICAgIEBwbGFuZV9nZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5KDIwLDIwLHNlZ21lbnRzLHNlZ21lbnRzKTtcblxuICAgICAgICBAcGxhbmVfbWF0ZXJpYWwgPSBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe1xuXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXIgICAgICAgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhZGVyLXZlcnRleC10ZXJyYWluLXBlcmxpbnNvbWJyZXJvJykudGV4dENvbnRlbnQsXG5cbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFkZXItZnJhZ21lbnQtdGVycmFpbicpLnRleHRDb250ZW50LFxuXG4gICAgICAgICAgICB3aXJlZnJhbWUgICAgICAgICAgOiBAb3B0aW9ucy53aXJlZnJhbWUsXG5cbiAgICAgICAgICAgIHdpcmVmcmFtZUxpbmV3aWR0aCA6IDEsXG5cbiAgICAgICAgICAgIHRyYW5zcGFyZW50ICAgICAgICA6IHRydWUsXG5cbiAgICAgICAgICAgIHVuaWZvcm1zICAgICAgICAgICA6IEB1bmlmb3Jtc1xuXG4gICAgICAgIH0pO1xuXG5cblxuICAgICAgICBAZ3JvdW5kTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoIHsgYW1iaWVudDogMHhmZmZmZmYsIGNvbG9yOiAweGZmZmZmZiwgc3BlY3VsYXI6IDB4MDUwNTA1IH0gKVxuXG4gICAgICAgIEBncm91bmRNYXRlcmlhbC5jb2xvci5zZXRIU0woIDAuMDk1LCAxLCAwLjc1ICk7XG5cbiAgICAgICAgXG5cbiAgICAgICAgQG1hdGVyaWFscyA9IFtcblxuICAgICAgICAgICAgICAgICAgICBAZ3JvdW5kTWF0ZXJpYWwsXG5cbiAgICAgICAgICAgICAgICAgICAgQHBsYW5lX21hdGVyaWFsXG4gICAgICAgIF1cblxuICAgICAgICBAcGxhbmVfbWVzaCA9IFRIUkVFLlNjZW5lVXRpbHMuY3JlYXRlTXVsdGlNYXRlcmlhbE9iamVjdCggQHBsYW5lX2dlb21ldHJ5LCBAbWF0ZXJpYWxzICk7XG5cbiAgICAgICAgQHBsYW5lX21lc2gucm90YXRpb24ueCA9IC0gTWF0aC5QSSAvIDI7XG5cbiAgICAgICAgQHBsYW5lX21lc2gucG9zaXRpb24ueSA9IC0wLjU7XG5cblxuICAgIHVwZGF0ZTogPT5cblxuICAgICAgICBALnBsYW5lX21hdGVyaWFsLnVuaWZvcm1zWyd0aW1lJ10udmFsdWUgPSBAY2xvY2suZ2V0RWxhcHNlZFRpbWUoKTtcblxuXG5cblxuXG5cbkFwcCA9IG5ldyB3aW5kb3cuQXBwKCk7XG5BcHAuaW5pdCgpOyJdfQ==
//# sourceURL=coffeescript